helm install ngf oci://ghcr.io/nginx/charts/nginx-gateway-fabric --create-namespace -n nginx-gateway


#Install gateway command:
#helm install ngf oci://ghcr.io/nginx/charts/nginx-gateway-fabric -n nginx-gateway

It will only create the control plane pod ( you will see ) pod/ngf-nginx-gateway-fabric in the namespace nginx-namespace.

till now no traffic is exposed, when you create the applucation gateway file kind: gateway  thats is gtw, thats where the dataplane pod will be created.

make sure you create both pod in the same namespace. creating in different namespace is not working.

Also, if you enable TLS. if that is in different namespace ( along with the actual app) make sure the service account of the gtw pod has access to it, if not provide access using role and role binding.

to check the access use below command:
kubectl auth can-i get secrets/polling-tls -n vote --as=system:serviceaccount:nginx-gateway:nginx-gateway-nginx

#while doin port forwarding , make sure you port forward the gateway gtw ( data plane) service that is "loadbalancer" type and not the "clusterip" type service that is created for the gateway control plane pod (pod/ngf-nginx-gateway-fabric-5487c58675-fznxs). The clusterip service is for internal communication between the gtw and the backend services. The loadbalancer service is the one that exposes the gtw to the outside world and is used for port forwarding.


#Notes: Make sure the gateway and gatewayclass are in the same namespace. The HTTPRoute can be in a different namespace but it should reference the gateway with the correct namespace.
#The TLS secret should be in the same namespace as the gateway or make sure the gateway has permissions to read the secret if it is in a different namespace. In this example, 
#the gateway is in the nginx-gateway namespace and the TLS secret is in the vote namespace, so we need to create a role and rolebinding to allow the gateway to read the secret.